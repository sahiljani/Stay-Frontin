{% comment %}
  Section: Hero 2 Grid
  Description: Two-column hero with headline, copy, CTA, and a responsive image or video.
  The section includes minimal, self-contained CSS so it works without Tailwind.
{% endcomment %}

{%- liquid
  assign min_h = ''
  case section.settings.min_height
    when 'screen'
      assign min_h = '100vh'
    when '600'
      assign min_h = '600px'
    else
      assign min_h = ''
  endcase

  assign bg_dark = section.settings.dark_background_color | default: '#000000'
  assign text_color = section.settings.text_color | default: '#ffffff'
  assign primary_color = section.settings.primary_color | default: '#e5e7eb'
-%}

<style>
  /* Simple responsive grid */
  #shopify-section-{{ section.id }} .hero2-grid {
    display: grid;
    grid-template-columns: 1fr;
    background: #000;
    min-height: 100vh;
    }

  @media (min-width: 768px) {
    #shopify-section-{{ section.id }} .hero2-grid {
      grid-template-columns: 45% 55%;
    }
  }

  @media (min-width: 1200px) {
    #shopify-section-{{ section.id }} .hero2-grid {
      grid-template-columns: 42% 58%;
    }
  }
  
  #shopify-section-{{ section.id }} .hero2-left {
    background: var(--hero2-bg, #000);
    color: var(--hero2-text, #fff);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    padding: 4rem 2rem;
    text-align: left;
    min-height: 100vh;
    position: relative;
    z-index: 1;
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section.id }} .hero2-left {
      padding: 6rem 4rem;
    }
  }

  @media (min-width: 1024px) {
    #shopify-section-{{ section.id }} .hero2-left {
      padding: 8rem 6rem 8rem 8%;
    }
  }

  @media (min-width: 1400px) {
    #shopify-section-{{ section.id }} .hero2-left {
      padding: 8rem 8rem 8rem 12%;
    }
  }
  
  #shopify-section-{{ section.id }} .hero2-title {
    line-height: 1.05;
    font-weight: 800;
    margin: 0 0 2rem 0;
    letter-spacing: -0.02em;
    max-width: 20ch;
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section.id }} .hero2-title {
      margin: 0 0 2.5rem 0;
    }
  }

  #shopify-section-{{ section.id }} .hero2-p {
    line-height: 1.65;
    margin: 0 0 1.25rem 0;
    opacity: .92;
    max-width: 42ch;
  }

  #shopify-section-{{ section.id }} .hero2-p:last-of-type {
    margin-bottom: 2.5rem;
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section.id }} .hero2-p {
      line-height: 1.7;
      max-width: 48ch;
    }
  }

  #shopify-section-{{ section.id }} .hero2-button {
    display: inline-block;
    background: var(--hero2-primary, #e5e7eb);
    color: #000;
    font-weight: 700;
    padding: 16px 40px;
    text-decoration: none;
    border-radius: 8px;
    transition: all 0.3s ease;
    margin-top: 0.5rem;
    letter-spacing: 0.02em;
    text-transform: uppercase;
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section.id }} .hero2-button {
      padding: 18px 48px;
    }
  }
  
  #shopify-section-{{ section.id }} .hero2-button:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  #shopify-section-{{ section.id }} .hero2-right {
    min-height: 60vh;
    background: #000;
    order: -1;
    position: relative;
    overflow: hidden;
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section.id }} .hero2-right {
      order: 0;
      min-height: 100vh;
    }
  }
  
  #shopify-section-{{ section.id }} .video-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  #shopify-section-{{ section.id }} .hero2-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  @media (max-width: 767px) {
    #shopify-section-{{ section.id }} .hero2-video {
      object-position: 65% center;
    }
  }
  
  /* Ticker */
  #shopify-section-{{ section.id }} .hero2-ticker {
    overflow: hidden;
    border-top: 1px solid #374151;
    border-bottom: 1px solid #374151;
    background: #000;
    position: relative;
    z-index: 2;
  }
  
  #shopify-section-{{ section.id }} .hero2-marquee { 
    display: flex; 
    animation: hero2-marquee 25s linear infinite;
  }
  
  #shopify-section-{{ section.id }} .hero2-chip {
    display: flex;
    align-items: center;
    padding: 1rem 2rem;
    flex-shrink: 0;
    color: #6b7280;
    font-weight: 700;
    letter-spacing: 0.05em;
  }

  @media (max-width: 767px) {
    #shopify-section-{{ section.id }} .hero2-chip {
      padding: 0.75rem 1rem;
    }
  }
  
  #shopify-section-{{ section.id }} .hero2-chip .emoji { 
    margin-right: 0.5rem;
  }
  
  @keyframes hero2-marquee { 
    0% { transform: translateX(0); } 
    100% { transform: translateX(-50%); } 
  }
</style>

<section
  class="hero2"
  style="--hero2-bg: {{ bg_dark }}; --hero2-text: {{ text_color }}; --hero2-primary: {{ primary_color }};{% if min_h != '' %} --hero2-min-h: {{ min_h }};{% endif %}"
>
  <div class="hero2-grid">
    <div class="hero2-left">
      {%- if section.settings.heading != blank -%}
        <h1 class="hero2-title">{{ section.settings.heading }}</h1>
      {%- endif -%}

      {%- if section.settings.subtext_richtext != blank -%}
        <div class="hero2-p">{{ section.settings.subtext_richtext }}</div>
      {%- endif -%}

      {%- if section.settings.body_richtext != blank -%}
        <div class="hero2-p">{{ section.settings.body_richtext }}</div>
      {%- endif -%}

      {%- if section.settings.button_label != blank and section.settings.button_link != blank -%}
        <a class="hero2-button" href="{{ section.settings.button_link }}">{{ section.settings.button_label }}</a>
      {%- endif -%}
    </div>

    <div class="hero2-right">
      {%- if section.settings.media_type == 'video' and section.settings.video != blank -%}
        <div class="video-wrapper">
          {{ section.settings.video | video_tag: 
            class: 'hero2-video',
            autoplay: true,
            loop: true,
            muted: true,
            playsinline: true,
            controls: false
          }}
        </div>
      {%- elsif section.settings.media_type == 'external_video' and section.settings.video_url != blank -%}
        {%- assign video_url = section.settings.video_url | strip -%}
        {%- if video_url contains 'youtube.com' or video_url contains 'youtu.be' -%}
          {%- # Extract YouTube ID -%}
          {%- assign youtube_id = video_url | split: 'v=' | last | split: '&' | first -%}
          {%- if youtube_id == video_url -%}
            {%- assign youtube_id = video_url | split: '/' | last -%}
          {%- endif -%}
          <div class="video-wrapper">
            <iframe 
              class="hero2-video"
              src="https://www.youtube.com/embed/{{ youtube_id }}?autoplay=1&mute=1&loop=1&playlist={{ youtube_id }}&controls=0&rel=0&showinfo=0&modestbranding=1&playsinline=1&enablejsapi=1"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
            </iframe>
          </div>
        {%- elsif video_url contains 'vimeo.com' -%}
          {%- assign vimeo_id = video_url | split: '/' | last -%}
          <div class="video-wrapper">
            <iframe 
              class="hero2-video"
              src="https://player.vimeo.com/video/{{ vimeo_id }}?autoplay=1&loop=1&background=1&autopause=0&quality=1080p"
              frameborder="0"
              allow="autoplay; picture-in-picture"
              allowfullscreen>
            </iframe>
          </div>
        {%- else -%}
          <div class="video-wrapper">
            <video
              class="hero2-video"
              src="{{ video_url }}"
              autoplay
              loop
              muted
              playsinline
              webkit-playsinline
              x5-playsinline>
            </video>
          </div>
        {%- endif -%}
      {%- endif -%}
    </div>
  </div>

  {%- if section.settings.show_ticker -%}
    <div class="hero2-ticker">
      <div class="hero2-marquee">
        {%- assign items = section.blocks -%}
        {%- if items.size == 0 -%}
          {%- comment -%} Defaults when no blocks configured {%- endcomment -%}
          <div class="hero2-chip"><span class="emoji">‚ù§Ô∏è</span><span>LATEX - FREE</span></div>
          <div class="hero2-chip"><span class="emoji">üíß</span><span>WATER + SWEAT RESISTANT</span></div>
          <div class="hero2-chip"><span class="emoji">üî•</span><span>7,000,000+ SOLD</span></div>
          <div class="hero2-chip"><span>MULTI - WEEK HOLD</span></div>
          <div class="hero2-chip"><span class="emoji">‚ù§Ô∏è</span><span>LATEX - FREE</span></div>
          <div class="hero2-chip"><span>MULTI - WEEK HOLD</span></div>
          <div class="hero2-chip"><span class="emoji">üíß</span><span>WATER + SWEAT RESISTANT</span></div>
          <div class="hero2-chip"><span class="emoji">üî•</span><span>7,000,000+ SOLD</span></div>
        {%- else -%}
          {%- for block in section.blocks -%}
            <div class="hero2-chip" {{ block.shopify_attributes }}>
              {%- if block.settings.emoji != blank -%}<span class="emoji">{{ block.settings.emoji }}</span>{%- endif -%}
              <span>{{ block.settings.text }}</span>
            </div>
          {%- endfor -%}
          {%- for block in section.blocks -%}
            <div class="hero2-chip">
              {%- if block.settings.emoji != blank -%}<span class="emoji">{{ block.settings.emoji }}</span>{%- endif -%}
              <span>{{ block.settings.text }}</span>
            </div>
          {%- endfor -%}
        {%- endif -%}
      </div>
    </div>
  {%- endif -%}
</section>

{% schema %}
{
  "name": "Hero 2 Grid",
  "tag": "section",
  "class": "section hero-2-grid",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "The Wig Adhesive With Invisible Hold" },
    { "type": "richtext", "id": "subtext_richtext", "label": "Lead paragraph", "default": "<p><strong>GHOSTBOND</strong> is more than just an adhesive‚Äîit's the <strong>gold standard for wig security.</strong></p>" },
    { "type": "richtext", "id": "body_richtext", "label": "Body paragraph", "default": "<p>Whether you need an ultra-strong hold for all-day wear, a sweat-proof formula for active days, or a natural finish that blends seamlessly, we've got you covered.</p>" },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "SHOP NOW" },
    { "type": "url", "id": "button_link", "label": "Button link" },
    {
      "type": "header",
      "content": "Media Settings"
    },
    {
      "type": "select",
      "id": "media_type",
      "label": "Media type",
      "options": [
        { "value": "image", "label": "Image" },
        { "value": "video", "label": "Video Upload" },
        { "value": "external_video", "label": "External Video URL" }
      ],
      "default": "image"
    },
    {
      "type": "header",
      "content": "Video Settings"
    },
    {
      "type": "video",
      "id": "video",
      "label": "Video Upload"
    },
    {
      "type": "text",
      "id": "video_url",
      "label": "External Video URL",
      "info": "Paste YouTube, Vimeo, or direct MP4 link"
    },
    {
      "type": "range",
      "id": "video_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Video Opacity",
      "default": 100
    },
    {
      "type": "header",
      "content": "Layout and Color"
    },
    {
      "type": "select",
      "id": "min_height",
      "label": "Min height",
      "default": "screen",
      "options": [
        { "value": "auto", "label": "Auto" },
        { "value": "600", "label": "600px" },
        { "value": "screen", "label": "Full screen" }
      ]
    },
    { "type": "checkbox", "id": "show_ticker", "label": "Show ticker strip", "default": true },
    { "type": "color", "id": "dark_background_color", "label": "Left background", "default": "#000000" },
    { "type": "color", "id": "text_color", "label": "Left text color", "default": "#ffffff" },
    { "type": "color", "id": "primary_color", "label": "Button background", "default": "#e5e7eb" }
  ],
  "blocks": [
    {
      "type": "ticker_item",
      "name": "Ticker item",
      "settings": [
        { "type": "text", "id": "emoji", "label": "Emoji" },
        { "type": "text", "id": "text", "label": "Text", "default": "MULTI - WEEK HOLD" }
      ]
    }
  ],
  "presets": [
    { "name": "Hero 2 Grid", "blocks": [
      { "type": "ticker_item", "settings": { "emoji": "‚ù§Ô∏è", "text": "LATEX - FREE" } },
      { "type": "ticker_item", "settings": { "emoji": "", "text": "MULTI - WEEK HOLD" } },
      { "type": "ticker_item", "settings": { "emoji": "üíß", "text": "WATER + SWEAT RESISTANT" } },
      { "type": "ticker_item", "settings": { "emoji": "üî•", "text": "7,000,000+ SOLD" } }
    ]}
  ]
}
{% endschema %}