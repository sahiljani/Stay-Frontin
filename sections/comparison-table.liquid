{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  /* Comprehensive responsive styles for comparison table */
  .comparison-section-{{ section.id }} {
    background: #ffffff;
    color: #111827;
  }
  
  .comparison-container-{{ section.id }} {
    max-width: 80rem;
    margin: 0 auto;
    padding-left: 1rem;
    padding-right: 1rem;
  }
  
  @media (min-width: 640px) {
    .comparison-container-{{ section.id }} {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
  }
  
  @media (min-width: 1024px) {
    .comparison-container-{{ section.id }} {
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }
  
  .comparison-grid-{{ section.id }} {
    display: grid;
    grid-template-columns: 1fr;
    gap: 3rem;
    align-items: start;
  }
  
  @media (min-width: 1024px) {
    .comparison-grid-{{ section.id }} {
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: center;
    }
  }
  
  @media (min-width: 1280px) {
    .comparison-grid-{{ section.id }} {
      gap: 6rem;
    }
  }
  
  /* Left content column styles */
  .comparison-content-{{ section.id }} {
    margin-bottom: 2rem;
  }
  
  @media (min-width: 1024px) {
    .comparison-content-{{ section.id }} {
      margin-bottom: 0;
    }
  }
  
  .comparison-heading-{{ section.id }} {
    font-weight: 700;
    line-height: 1.1;
    letter-spacing: -0.025em;
    margin-bottom: 2rem;
  }

  .comparison-description-{{ section.id }} {
    line-height: 1.6;
    margin-bottom: 2rem;
    opacity: 0.8;
  }

  .comparison-checklist-heading-{{ section.id }} {
    font-weight: 600;
    margin-bottom: 1rem;
  }

  .comparison-checklist-{{ section.id }} {
    list-style: none;
    padding: 0;
    margin: 0 0 2rem 0;
  }

  .comparison-checklist-item-{{ section.id }} {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
  }
  
  .comparison-check-icon-{{ section.id }} {
    width: 1.25rem;
    height: 1.25rem;
    color: #10b981;
    flex-shrink: 0;
    margin-top: 0.125rem;
  }
  
  .comparison-button-{{ section.id }} {
    display: inline-block;
    background: #111827;
    color: #ffffff;
    font-weight: 600;
    padding: 0.75rem 2rem;
    border-radius: 0.5rem;
    text-decoration: none;
    transition: opacity 0.2s;
  }
  
  .comparison-button-{{ section.id }}:hover {
    opacity: 0.9;
  }
  
  /* Table styles - Mobile first */
  .comparison-table-wrapper-{{ section.id }} {
    width: 100%;
    overflow-x: auto;
    border-radius: 1rem;
    border: 1px solid #e5e7eb;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    background: #ffffff;
  }
  
  .comparison-table-{{ section.id }} {
    width: 100%;
    min-width: 400px; /* Minimum width for readability */
    border-collapse: collapse;
    text-align: center;
  }
  
  /* Table header */
  .comparison-table-{{ section.id }} thead th {
    padding: 1rem 0.5rem;
    font-weight: 600;
  }

  @media (min-width: 640px) {
    .comparison-table-{{ section.id }} thead th {
      padding: 1rem;
    }
  }
  
  .comparison-table-{{ section.id }} thead th:first-child {
    background: transparent;
  }
  
  .comparison-table-{{ section.id }} thead th:nth-child(2) {
    background: #111827;
    color: #ffffff;
  }
  
  .comparison-table-{{ section.id }} thead th:nth-child(3) {
    background: #f3f4f6;
    color: #111827;
  }
  
  /* Table body */
  .comparison-table-{{ section.id }} tbody tr {
    border-top: 1px solid #e5e7eb;
  }
  
  .comparison-table-{{ section.id }} tbody tr:nth-child(even) {
    background: #f9fafb;
  }
  
  .comparison-table-{{ section.id }} tbody td {
    padding: 0.75rem 0.5rem;
    vertical-align: middle;
  }

  @media (min-width: 640px) {
    .comparison-table-{{ section.id }} tbody td {
      padding: 1rem;
    }
  }
  
  .comparison-table-{{ section.id }} tbody td:first-child {
    text-align: left;
    font-weight: 500;
    padding-left: 0.75rem;
  }
  
  @media (min-width: 640px) {
    .comparison-table-{{ section.id }} tbody td:first-child {
      padding-left: 1rem;
    }
  }
  
  .comparison-table-{{ section.id }} tbody td:nth-child(2) {
    background: #f9fafb;
    font-weight: 500;
  }
  
  /* Icons in table */
  .comparison-icon-{{ section.id }} {
    width: 1.25rem;
    height: 1.25rem;
    margin: 0 auto;
    display: block;
  }
  
  .comparison-icon-green-{{ section.id }} {
    color: #10b981;
  }
  
  .comparison-icon-red-{{ section.id }} {
    color: #ef4444;
  }
  
  /* Mobile table adjustments */
  @media (max-width: 639px) {
    .comparison-table-{{ section.id }} tbody td:first-child {
      max-width: 120px;
      word-wrap: break-word;
    }
  }
  
  /* Dark mode support (if needed) */
  @media (prefers-color-scheme: dark) {
    .comparison-section-{{ section.id }} {
      background: #111827;
      color: #ffffff;
    }
    
    .comparison-table-wrapper-{{ section.id }} {
      border-color: #374151;
      background: #1f2937;
    }
    
    .comparison-table-{{ section.id }} thead th:nth-child(3) {
      background: #374151;
      color: #ffffff;
    }
    
    .comparison-table-{{ section.id }} tbody tr {
      border-color: #374151;
    }
    
    .comparison-table-{{ section.id }} tbody tr:nth-child(even) {
      background: #1f2937;
    }
    
    .comparison-table-{{ section.id }} tbody td:nth-child(2) {
      background: #374151;
    }
    
    .comparison-button-{{ section.id }} {
      background: #ffffff;
      color: #111827;
    }
  }
{%- endstyle -%}

<div class="comparison-section section-{{ section.id }}-padding">
  <div class="comparison-container">
    <div class="comparison-grid">
      
      {%- comment -%} Left Content Column {%- endcomment -%}
      <div class="comparison-content">
        {%- if section.settings.heading != blank -%}
          <h2 class="comparison-heading">
            {{ section.settings.heading }}
          </h2>
        {%- endif -%}
        
        {%- if section.settings.description != blank -%}
          <div class="comparison-description">
            {{ section.settings.description }}
          </div>
        {%- endif -%}
        
        {%- if section.settings.checklist_heading != blank -%}
          <p class="comparison-checklist-heading">{{ section.settings.checklist_heading }}</p>
        {%- endif -%}
        
        {%- if section.blocks.size > 0 -%}
          <ul class="comparison-checklist">
            {%- for block in section.blocks -%}
              {%- if block.type == 'checklist_item' -%}
                <li class="comparison-checklist-item" {{ block.shopify_attributes }}>
                  <svg class="comparison-check-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                  </svg>
                  <span>{{ block.settings.text | escape }}</span>
                </li>
              {%- endif -%}
            {%- endfor -%}
          </ul>
        {%- endif -%}
        
        {%- if section.settings.button_label != blank -%}
          <a 
            class="comparison-button"
            {% if section.settings.button_link == blank %}
              role="link" aria-disabled="true"
            {% else %}
              href="{{ section.settings.button_link }}"
            {% endif %}
          >
            {{ section.settings.button_label | escape }}
          </a>
        {%- endif -%}
      </div>
      
      {%- comment -%} Right Table Column {%- endcomment -%}
      <div class="comparison-table-container">
        <div class="comparison-table-wrapper">
          <table class="comparison-table">
            <thead>
              <tr>
                <th></th>
                <th class="primary-column">
                  {{ section.settings.column_1_header | default: 'Option 1' }}
                </th>
                <th class="secondary-column">
                  {{ section.settings.column_2_header | default: 'Option 2' }}
                </th>
              </tr>
            </thead>
            <tbody>
              {%- for block in section.blocks -%}
                {%- if block.type == 'comparison_row' -%}
                  <tr {{ block.shopify_attributes }}>
                    <td class="label-column">
                      {{ block.settings.label }}
                    </td>
                    <td class="primary-value">
                      {%- if block.settings.primary_value_type == 'text' -%}
                        {{ block.settings.primary_value }}
                      {%- elsif block.settings.primary_value_type == 'checkmark' -%}
                        <svg class="comparison-icon check-icon" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                      {%- endif -%}
                    </td>
                    <td class="secondary-value">
                      {%- if block.settings.secondary_value_type == 'text' -%}
                        {{ block.settings.secondary_value }}
                      {%- elsif block.settings.secondary_value_type == 'checkmark' -%}
                        <svg class="comparison-icon check-icon" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                      {%- elsif block.settings.secondary_value_type == 'cross' -%}
                        <svg class="comparison-icon cross-icon" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                        </svg>
                      {%- endif -%}
                    </td>
                  </tr>
                {%- endif -%}
              {%- endfor -%}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Simple comparison table styles */
  .comparison-section {
    background: #fff;
    color: #111;
  }
  
  .comparison-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .comparison-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    align-items: start;
  }
  
  @media (min-width: 768px) {
    .comparison-grid {
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
    }
  }
  
  /* Content styles */
  .comparison-content {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  
  .comparison-heading {
    font-weight: 700;
    line-height: 1.2;
    margin: 0;
  }

  .comparison-description {
    line-height: 1.6;
    opacity: 0.8;
  }
  
  .comparison-checklist-heading {
    font-weight: 600;
    margin: 0;
  }
  
  .comparison-checklist {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .comparison-checklist-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
  }
  
  .comparison-check-icon {
    width: 1.25rem;
    height: 1.25rem;
    color: #10b981;
    flex-shrink: 0;
    margin-top: 0.125rem;
  }
  
  .comparison-button {
    display: inline-block;
    background: #111;
    color: #fff;
    font-weight: 600;
    padding: 0.75rem 2rem;
    border-radius: 0.5rem;
    text-decoration: none;
    transition: opacity 0.2s;
  }
  
  .comparison-button:hover {
    opacity: 0.9;
  }
  
  /* Table styles */
  .comparison-table-wrapper {
    overflow: auto;
    border-radius: 1rem;
    border: 1px solid #e5e7eb;
  }
  
  .comparison-table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
  }
  
  .comparison-table th,
  .comparison-table td {
    padding: 1rem;
    text-align: center;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .comparison-table th {
    font-weight: 600;
    background: #f9fafb;
  }
  
  .comparison-table .primary-column {
    background: #111;
    color: #fff;
  }
  
  .comparison-table .label-column {
    text-align: left;
    font-weight: 500;
  }
  
  .comparison-table .primary-value {
    background: #f9fafb;
    font-weight: 500;
  }
  
  .comparison-icon {
    width: 1.25rem;
    height: 1.25rem;
    margin: 0 auto;
  }
  
  .check-icon {
    color: #10b981;
  }
  
  .cross-icon {
    color: #ef4444;
  }
</style>

{% schema %}
{
  "name": "Comparison Table",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "inline_richtext",
      "id": "heading",
      "default": "Compare Your Options",
      "label": "Heading"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        {
          "value": "h2",
          "label": "Small"
        },
        {
          "value": "h1",
          "label": "Medium"
        },
        {
          "value": "h0",
          "label": "Large"
        },
        {
          "value": "hxl",
          "label": "Extra large"
        },
        {
          "value": "hxxl",
          "label": "XX-Large"
        }
      ],
      "default": "h0",
      "label": "Heading size"
    },
    {
      "type": "richtext",
      "id": "description",
      "default": "<p>Make informed decisions with our detailed comparison table. See all the key features and benefits side by side.</p>",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "checklist_heading",
      "default": "Key factors to consider:",
      "label": "Checklist heading"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "Learn More",
      "label": "Button label"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Table headers"
    },
    {
      "type": "text",
      "id": "column_1_header",
      "default": "Option 1",
      "label": "First column header"
    },
    {
      "type": "text",
      "id": "column_2_header",
      "default": "Option 2",
      "label": "Second column header"
    },
    {
      "type": "header",
      "content": "Section colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 96
    }
  ],
  "blocks": [
    {
      "type": "checklist_item",
      "name": "Checklist item",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "Important feature to consider",
          "label": "Text"
        }
      ]
    },
    {
      "type": "comparison_row",
      "name": "Comparison row",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "default": "Feature name",
          "label": "Row label"
        },
        {
          "type": "select",
          "id": "primary_value_type",
          "options": [
            {
              "value": "text",
              "label": "Text"
            },
            {
              "value": "checkmark",
              "label": "Checkmark"
            }
          ],
          "default": "text",
          "label": "First column value type"
        },
        {
          "type": "text",
          "id": "primary_value",
          "default": "Value 1",
          "label": "First column value",
          "info": "Only used when value type is 'Text'"
        },
        {
          "type": "select",
          "id": "secondary_value_type",
          "options": [
            {
              "value": "text",
              "label": "Text"
            },
            {
              "value": "checkmark",
              "label": "Checkmark"
            },
            {
              "value": "cross",
              "label": "Cross"
            }
          ],
          "default": "text",
          "label": "Second column value type"
        },
        {
          "type": "text",
          "id": "secondary_value",
          "default": "Value 2",
          "label": "Second column value",
          "info": "Only used when value type is 'Text'"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Comparison Table",
      "blocks": [
        {
          "type": "checklist_item",
          "settings": {
            "text": "Quality and performance"
          }
        },
        {
          "type": "checklist_item",
          "settings": {
            "text": "Value for money"
          }
        },
        {
          "type": "checklist_item",
          "settings": {
            "text": "Customer satisfaction"
          }
        },
        {
          "type": "comparison_row",
          "settings": {
            "label": "Price",
            "primary_value_type": "text",
            "primary_value": "$29.99",
            "secondary_value_type": "text",
            "secondary_value": "$39.99"
          }
        },
        {
          "type": "comparison_row",
          "settings": {
            "label": "Quality Rating",
            "primary_value_type": "text",
            "primary_value": "5/5",
            "secondary_value_type": "text",
            "secondary_value": "3/5"
          }
        },
        {
          "type": "comparison_row",
          "settings": {
            "label": "Free Shipping",
            "primary_value_type": "checkmark",
            "secondary_value_type": "cross"
          }
        }
      ]
    }
  ]
}
{% endschema %}